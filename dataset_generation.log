========================================
  USPTO Patent Figure Processing
========================================

Step 1: Running diagnostics...
----------------------------------------
======================================================================
USPTO Data Directory Diagnostics
======================================================================

âœ“ Raw data directory exists: /Users/alexo/Projects/drawing-agent/data/raw

âœ“ Found 1 bulk download folder(s):
   - edbook_2024_10_21

Analyzing patent zip files...
----------------------------------------------------------------------

edbook_2024_10_21: 3 zip file(s)
  Checking first 3 files...
    âœ“ US12448895-20251021.ZIP: 1 XML, 3 TIFF - OK
    âœ“ US12448749-20251021.ZIP: 1 XML, 13 TIFF - OK
    âœ“ US12448249-20251021.ZIP: 1 XML, 7 TIFF - OK

======================================================================
SUMMARY
======================================================================
Total zip files found:        3
Valid patents (1 XML + TIFF): 3


âœ“ Found 3 valid patents that can be processed

Next steps:
  1. Test with single patent: python test_single_patent.py <path-to-zip>
  2. Process all: bash scripts/process_uspto.sh

Step 2: Processing patents...
----------------------------------------
Config: /Users/alexo/Projects/drawing-agent/configs/figures.yaml
Raw data directory: /Users/alexo/Projects/drawing-agent/data/raw

Processing USPTO patent figures...
Config: /Users/alexo/Projects/drawing-agent/configs/figures.yaml
[10/27/25 13:35:55] INFO     Found 1 bulk download folders  patent_figures.py:91
Processing bulk downloads:   0%|          | 0/1 [00:00<?, ?it/s]
Processing edbook_2024_10_21:   0%|          | 0/3 [00:00<?, ?it/s][A
Processing edbook_2024_10_21:  33%|â–ˆâ–ˆâ–ˆâ–Ž      | 1/3 [00:00<00:00,  4.03it/s][A[10/27/25 13:35:56] WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749_p0_f1.                        
                             png has too little content:                        
                             0.90%                                              
[10/27/25 13:35:57] WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749_p0_f0.                        
                             png has too little content:                        
                             0.48%                                              
                    WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749.png                           
                             has too little content:                            
                             0.44%                                              
[10/27/25 13:35:58] WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749_p0_f0.                        
                             png has too little content:                        
                             0.94%                                              
                    WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749_p0_f2.                        
                             png has too little content:                        
                             0.69%                                              
                    WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448749/12448749_p0_f2.                        
                             png has too little content:                        
                             0.51%                                              

Processing edbook_2024_10_21:  67%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‹   | 2/3 [00:02<00:01,  1.57s/it][A[10/27/25 13:35:59] WARNING  Image                       image_processing.py:355
                             data/figures/processed/imag                        
                             es/12448249/12448249_p0_f2.                        
                             png has too little content:                        
                             0.84%                                              

Processing edbook_2024_10_21: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 3/3 [00:03<00:00,  1.08s/it][A
                                                                           [A                    INFO     Processed edbook_2024_10_21:  patent_figures.py:104
                             33 samples                                         
Processing bulk downloads: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:03<00:00,  3.24s/it]Processing bulk downloads: 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 1/1 [00:03<00:00,  3.24s/it]
                    INFO     Processed 33 total samples    patent_figures.py:106
                    INFO     Found 3 unique patent         patent_figures.py:121
                             families                                           
                    INFO     Split sizes: 24 train, 0 val, patent_figures.py:412
                             9 test samples                                     
                    INFO     Saving dataset to             patent_figures.py:127
                             data/figures/processed/hf_dat                      
                             aset                                               
Saving the dataset (0/1 shards):   0%|          | 0/24 [00:00<?, ? examples/s]Saving the dataset (1/1 shards): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 24/24 [00:00<00:00, 6940.38 examples/s]Saving the dataset (1/1 shards): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 24/24 [00:00<00:00, 6804.79 examples/s]
Saving the dataset (0/1 shards): 0 examples [00:00, ? examples/s]Saving the dataset (1/1 shards): : 0 examples [00:00, ? examples/s]Saving the dataset (1/1 shards): : 0 examples [00:00, ? examples/s]
Saving the dataset (0/1 shards):   0%|          | 0/9 [00:00<?, ? examples/s]Saving the dataset (1/1 shards): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 9/9 [00:00<00:00, 4240.95 examples/s]Saving the dataset (1/1 shards): 100%|â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ| 9/9 [00:00<00:00, 4161.02 examples/s]
                    INFO     Saved dataset summary to      patent_figures.py:496
                             data/figures/processed/datase                      
                             t_summary.json                                     

âœ“ Processing complete!
Train samples: 24
Validation samples: 0
Test samples: 9

========================================
  Processing Complete!
========================================

Dataset saved to: data/figures/processed/

Next steps:
  1. Review the dataset: data/figures/processed/hf_dataset
  2. Check summary: data/figures/processed/dataset_summary.json
  3. Run training: scripts/run_finetune.sh
